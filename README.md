# 🛒 공동구매 플랫폼 뭉쳐야산(buy)다 프론트엔드

**moongsan**은 사용자 중심의 공동구매 참여 흐름을 UI/UX로 설계한 프로젝트입니다.  
참여자와 주최자 간의 역할 분기, 마감 및 재고 변화에 따른 UI 반응, 다단계 입력 검증 등 커머스 기반의 복잡한 시나리오를 **React + TypeScript**로 구조화하여 구현했습니다.

이 프로젝트는 **카카오테크 부트캠프 2기 팀 프로젝트**로,  
백엔드 / AI / 클라우드 파트와 협업하며 **프론트엔드 파트를 단독으로 개발 중**입니다.

> 약 4주간 집중 개발하여 **MVP(v1)**을 완성하였으며, 이후 채팅, 알림, 챗봇, 장바구니 등 기능을 **`dev` 브랜치에서 지속적으로 확장 중입니다.**  
> **`main` 브랜치는 MVP 기준의 안정적인 기능만 포함**되어 있으며, 최신 작업 내용과 기능 추가 사항은 반드시 `dev` 브랜치를 참고해 주세요.  
> 향후에는 **Next.js + Emotion 기반으로 마이그레이션**하여 SSR 및 성능 최적화, 스타일 일관성을 강화할 예정입니다.

---

## 💡 구현 목표와 의도

- 다양한 사용자 흐름에 대응 가능한 **입력 구조 및 유효성 검증 체계**
- 상품 상태 변화(마감/품절 등)에 따른 **비동기 UI 동기화**
- **참여자 vs 주최자 역할 분기**에 따른 동작 흐름 설계
- 클라이언트와 서버 간 상태 흐름을 분리하고 동기화하기 위한 구조 설계
- **재사용 가능한 공통 UI 컴포넌트 구조 설계**를 통한 유지보수성 확보

---

## ⚙️ 기술 스택

- **React 18** + **TypeScript**
- **Vite** – 빠른 번들링 및 개발 서버
- **Zustand** – 클라이언트 상태 (모달, 주문, 유저 등)
- **React Hook Form + Zod** – 모든 폼의 타입 기반 유효성 검증
- **Tanstack Query** – 서버 상태 캐싱 및 refetch 관리
- **Styled-components** – 스타일 모듈화

---

## 🗂 디렉토리 구조

```bash
src/
├── api/               # axios wrapper 및 API 모듈
├── components/        # 공통 UI (입력창, 버튼, 이미지 업로더 등)
├── hooks/             # 커스텀 훅 및 React Query 정의
├── pages/             # 페이지 컴포넌트 (메인, 상세, 마이페이지 등)
├── stores/            # Zustand 상태 (모달, 주문, 유저 등)
├── types/             # 공통 타입 정의
├── utils/             # 날짜, 금액 포맷 등 유틸 함수
└── App.tsx            # 앱 엔트리 포인트
```

---

## 🧩 주요 기능 설명

### 📌 상태 기반 사용자 흐름 설계

- 참여자 / 주최자 역할에 따라 화면 및 인터랙션 분리
- Zustand로 클라이언트 상태 (모달, 유저정보 등) 전역 관리
- Tanstack Query를 통한 서버 데이터 fetch + 캐싱 + refetch

### 📌 주문 프로세스와 폼 처리

- 수량 + 입금 계좌 입력 → 총 금액 자동 계산
- `React Hook Form`과 `Zod`를 사용해 모든 입력에 정적 타입 기반 유효성 검증
- 주문 중 상태(마감, 품절 등) 변경 시 UI가 실시간으로 반응하도록 처리

### 📌 협업을 고려한 구조적 설계

- API 호출은 명확히 모듈화 (`api/` 폴더)하여 백엔드 명세 변경에 대응 가능
- 컴포넌트 이름, 훅 이름, 타입 분리는 전부 유지보수성과 확장성을 고려해서 작성
- UI 중심 기능뿐 아니라 전체 상태 흐름을 명확하게 구조화

### 🧩 UI 컴포넌트 예시

- `MultiImageUploader`: 사용자가 대표 이미지를 선택하고 썸네일을 확인할 수 있는 다중 업로드 컴포넌트
- `ControlledNumberInput`: 실시간 필터링 및 금액 포맷 처리가 가능한 숫자 입력 컴포넌트
- 반복되는 입력 흐름과 예외 처리를 재사용 가능한 컴포넌트로 분리하여, **입력 UX의 일관성과 유지보수성을 높였습니다.**

---

## 🧠 TypeScript 사용 전략

- 유니언 타입 추론(`as const`)과 키-값 매핑(`Record`) 등 TypeScript의 유틸리티 타입들을 활용해 컴포넌트 로직의 타입 안정성과 명확한 데이터 흐름 구현
- 전역 `types/` 폴더로 도메인 모델과 API 타입 분리
- 모든 컴포넌트에 제네릭과 명확한 타입 적용 → 확장성과 유지보수성 강화

---

## 🐞 트러블슈팅 사례

### ✅ 1. styled-components에서 DOM 경고 발생
- CSS 전용 props(`$isSelected`)를 일반 prop으로 넘겨 React에서 DOM 경고가 발생함.
- `$` prefix를 사용하면 styled-components가 해당 prop을 DOM에 전달하지 않아 경고를 방지할 수 있음.

### ✅ 2. z.literal(true) + refine 동작 누락
- `refine()`을 사용해도 `z.literal(true)`에서 기본 에러 메시지로 덮여버림.
- `errorMap`을 활용해 커스텀 에러 메시지를 정확하게 표시하도록 수정함.

### ✅ 3. onChange 핸들러 중복/무시 문제
- `...props` 안의 `onChange`와 내부 로직의 `handleChange()`가 충돌하며 일부 로직이 실행되지 않음.
- `onChange`를 명시적으로 분리해 병합 호출함으로써 form 등록 및 UI 처리를 모두 보장함.

### ✅ 4. useForm 제네릭 타입 충돌
- `useForm<>()`의 제네릭 타입이 `zodResolver()`의 추론 타입과 정확히 일치하지 않아 타입 에러 발생.
- 제네릭을 제거하고 `zodResolver()` 타입 추론을 그대로 따르게 하여 문제 해결.

### ✅ 5. 쿠키 기반 인증에서 사용자 정보 혼동
- SSR 환경 또는 프록시 서버(Vercel 등)에서 AccessToken 쿠키가 섞이며 사용자 정보가 잘못 로딩됨.
- `SameSite=None; Secure` 설정, 클라이언트 초기화 로직 강화, React Query 캐시 명확화로 대응함.

---

## 📈 향후 기능 추가 예정 (6월 작업 계획)

- **WebSocket 기반 그룹채팅 및 익명채팅**
- **실시간 알림 기능** (입금 확인, 마감 안내 등)
- **챗봇** (만능 서비스 가이드)
- **장바구니 기능**
- **관심 목록(찜)** 기능
- **CI 구성 + 테스트 코드 도입 예정**

---

## 🤝 협업 구조

이 프로젝트는 GitHub 조직 [`100-hours-a-week`](https://github.com/100-hours-a-week) 내에서 팀 단위로 진행되었습니다.  
[14-YG-FE](https://github.com/100-hours-a-week/14-YG-FE) 리포지토리는 프론트엔드 전용이며,  
AI, 백엔드, 클라우드 파트는 각각 별도의 리포지토리로 운영되고 있습니다.

프론트는 제가 단독으로 개발하며, 전체 구조 및 컴포넌트 설계, API 연동, 상태 흐름 등 모든 부분을 직접 구현했습니다.

---

## 🧪 고민한 지점들

- **공통 유틸 / 입력 컴포넌트 분리 → 라이브러리화 가능성 고려**
- **폼 유효성 검증 흐름을 일관성 있게 구성하기 위한 설계 (nullable, refine, errorMap 등)**
- **검색바, 정렬 셀렉터 등 공통 UI 컴포넌트의 위치 및 레이아웃 충돌 방지 설계**
- **마감/품절과 같은 비동기 상태 변화에 대한 UI 반영 시점 제어**
- **상태 분리를 위한 Zustand / Tanstack Query 조합 구조 설계**
- **협업 시 BE/AI와 명확한 인터페이스 맞춤을 위한 타입 기반 개발 및 API 모듈화**
- **테스트 자동화를 고려한 CI 도입 방향과 GitHub Actions 활용 계획**
- 
---

## 🔍 리뷰 포인트 제안

- 역할 분기에 따른 UI 흐름 처리와 상태 분리 구조
- 주문 마감/품절 상황에 따른 서버-UI 동기화 처리
- 클라이언트 상태(Zustand) + 서버 상태(Tanstack Query) 통합 구조
- Zod 기반 입력 검증 흐름과 공통 컴포넌트 연계 방식
- 전체 코드 구조의 모듈화 및 유지보수 고려 설계

---

## 👩🏻‍💻 만든 사람

- 김진아  
- GitHub: [github.com/jinaaaaaaaaaaaaa](https://github.com/jinaaaaaaaaaaaaa)  
- Email: [jinatye@naver.com]

---

